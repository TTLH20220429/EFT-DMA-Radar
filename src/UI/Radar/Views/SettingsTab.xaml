<UserControl x:Class="LoneEftDmaRadar.UI.Radar.Views.SettingsTab"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:LoneEftDmaRadar.UI.Radar.Views"
             xmlns:vm="clr-namespace:LoneEftDmaRadar.UI.Radar.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Padding="10">

    <d:UserControl.DataContext>
        <d:DesignInstance Type="{x:Type vm:SettingsViewModel}"
                          IsDesignTimeCreatable="False" />
    </d:UserControl.DataContext>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Orientation="Vertical"
                    Margin="0,0,0,10">
            <!-- 雷达设置 -->
            <GroupBox Header="雷达设置"
                      Margin="0,0,0,12">
                <StackPanel>

                    <!-- 操作说明文本 -->
                    <TextBlock TextWrapping="Wrap"
                               Margin="0,0,0,12"
                               FontStyle="Italic">
放大：F1 / 鼠标滚轮向上<LineBreak />
缩小：F2 / 鼠标滚轮向下<LineBreak />
切换全屏：F11
                    </TextBlock>

                    <!-- 功能按钮 -->
                    <WrapPanel Margin="0,0,0,12">
                        <Button Content="重启雷达"
                                ToolTip="重启当前战局的雷达。当雷达卡在'等待战局开始'或功能异常时可能有用。"
                                Command="{Binding RestartRadarCommand}"
                                MinWidth="100"
                                Height="35"
                                Margin="0,0,8,8" />
                        <Button Content="颜色选择器"
                                ToolTip="自定义雷达界面中的实体颜色。"
                                IsEnabled="{Binding ColorPickerIsEnabled}"
                                Command="{Binding OpenColorPickerCommand}"
                                MinWidth="100"
                                Height="35"
                                Margin="0,0,8,8" />
                        <Button Content="打开配置文件夹"
                                ToolTip="打开配置文件所在文件夹。"
                                Command="{Binding OpenConfigCommand}"
                                MinWidth="100"
                                Height="35"
                                Margin="0,0,8,8" />
                        <Button Content="备份配置"
                                ToolTip="备份你的配置文件（建议定期备份）。"
                                Command="{Binding BackupConfigCommand}"
                                MinWidth="100"
                                Height="35"
                                Margin="0,0,8,8" />
                    </WrapPanel>

                    <!-- 滑动条设置 -->
                    <WrapPanel Margin="0,0,0,12">
                        <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Center"
                                    Margin="0,0,16,8">
                            <TextBlock Text="界面缩放"
                                       VerticalAlignment="Center"
                                       ToolTip="设置雷达/用户界面的缩放比例。高分辨率显示器可能需要增大此值。" />
                            <Slider x:Name="UIScaleSlider"
                                    Width="150"
                                    Margin="8,0"
                                    Minimum="0.5"
                                    Maximum="2.0"
                                    SmallChange="0.01"
                                    LargeChange="0.1"
                                    Value="{Binding UIScale, Mode=TwoWay}" />
                            <TextBlock Text="{Binding Value, ElementName=UIScaleSlider, StringFormat=F2}"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Center"
                                    Margin="0,0,16,8">
                            <TextBlock Text="雷达最大帧率（0 = 无限制）"
                                       VerticalAlignment="Center" />
                            <Slider x:Name="RadarFpsSlider"
                                    Width="180"
                                    Margin="8,0"
                                    Minimum="0"
                                    Maximum="240"
                                    SmallChange="5"
                                    LargeChange="15"
                                    TickFrequency="15"
                                    IsSnapToTickEnabled="True"
                                    Value="{Binding RadarMaxFPS, Mode=TwoWay}" />
                            <TextBlock Text="{Binding Value, ElementName=RadarFpsSlider, StringFormat='{}{0:F0}'}"
                                       VerticalAlignment="Center"
                                       Margin="8,0,0,0" />
                        </StackPanel>
                    </WrapPanel>

                    <!-- 开关选项 -->
                    <WrapPanel>
                        <CheckBox Content="显示地图设置助手"
                                  ToolTip="切换'地图设置助手'，帮助配置地图边界和缩放比例"
                                  IsChecked="{Binding ShowMapSetupHelper, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="瞄准视图组件"
                                  ToolTip="切换瞄准视图组件，在雷达窗口中提供简易ESP功能，可拖动位置。"
                                  IsChecked="{Binding AimviewWidget, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="玩家信息组件"
                                  ToolTip="切换玩家信息组件，显示当前战局中的玩家/首领信息，可拖动位置。"
                                  IsChecked="{Binding PlayerInfoWidget, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="显示队伍连线"
                                  ToolTip="通过半透明绿色线条连接组队玩家，不适用于自己的队伍。"
                                  IsChecked="{Binding ConnectGroups, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="隐藏玩家名称"
                                  ToolTip="隐藏雷达和玩家信息组件中的人类玩家名称，改为显示（高度,距离）。"
                                  IsChecked="{Binding HideNames, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="显示地雷"
                                  IsChecked="{Binding ShowMines, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="队友瞄准线"
                                  ToolTip="启用后，队友的瞄准线长度将与主玩家一致。"
                                  IsChecked="{Binding TeammateAimlines, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="AI瞄准线"
                                  ToolTip="为AI玩家启用动态瞄准线。当你被AI瞄准时时，瞄准线会延长。"
                                  IsChecked="{Binding AIAimlines, Mode=TwoWay}"
                                  Margin="0,0,0,8" />
                        <CheckBox Content="标记可疑玩家"
                                  ToolTip="根据特定标准（击杀/死亡比、存活率等）标记可疑玩家"
                                  IsChecked="{Binding MarkSusPlayers, Mode=TwoWay}"
                                  Margin="0,0,0,8" />
                    </WrapPanel>

                </StackPanel>
            </GroupBox>

            <!-- 战利品设置 -->
            <GroupBox Header="战利品"
                      Margin="0,0,0,12">
                <StackPanel>
                    <WrapPanel Margin="0,0,0,8">
                        <CheckBox Content="显示战利品（F3）"
                                  ToolTip="切换是否在雷达/ESP中显示战利品。"
                                  IsChecked="{Binding ShowLoot, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                        <CheckBox Content="显示静态容器"
                                  ToolTip="在地图/ESP中显示静态容器（如箱子、抽屉等）。"
                                  IsChecked="{Binding ShowStaticContainers, Mode=TwoWay}"
                                  Margin="0,0,16,8" />
                    </WrapPanel>

                    <StackPanel Orientation="Horizontal"
                                VerticalAlignment="Center"
                                Margin="0,0,16,8"
                                IsEnabled="{Binding ShowStaticContainers}">
                        <TextBlock Text="容器显示距离"
                                   VerticalAlignment="Center" />
                        <Slider x:Name="ContainerDistSlider"
                                Width="150"
                                Margin="8,0"
                                Minimum="0"
                                Maximum="200"
                                SmallChange="1"
                                LargeChange="10"
                                Value="{Binding ContainerDistance, Mode=TwoWay}" />
                        <TextBlock Text="{Binding Value, ElementName=ContainerDistSlider}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0" />
                    </StackPanel>

                </StackPanel>
            </GroupBox>

        </StackPanel>
    </ScrollViewer>
</UserControl>